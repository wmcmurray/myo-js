!function(t){"use strict";function e(){this._eventsListeners={}}var s=e.prototype;s.on=function(t,e){return this._eventsListeners[t]||(this._eventsListeners[t]=[]),this._eventsListeners[t].push(e),"BIND_EVENT"!=t&&this.emit("BIND_EVENT",t),this},s.off=function(t,e){var s,i=[];for(var n in this._eventsListeners[t])s=this._eventsListeners[t][n],s!=e&&i.push(s);return this._eventsListeners[t]=i,this},s.emit=function(t){if(this._eventsListeners[t]){var e=[],s=0;for(s in arguments)s>0&&e.push(arguments[s]);for(s in this._eventsListeners[t])this._eventsListeners[t][s].apply(this,e)}return this},t.MyoEventsDispatcher=e}(window),function(t){"use strict";function e(t){this.id=t,this.status=null,this.armStatus=null,this.arm=null,this.direction=null,this.accelerometer={},this.gyroscope={},this.orientation={},this.pose=null,this.on("BIND_EVENT",s.bind(this))}function s(t){switch(t){case"STATUS_CHANGED":this.emit("STATUS_CHANGED",this.status)}}var i=50;e.prototype=new MyoEventsDispatcher,e.prototype.constructor=e,e.prototype.parent=MyoEventsDispatcher.prototype,e.POSE_THUMB_TO_PINKY="thumb_to_pinky",e.POSE_FINGERS_SPREAD="fingers_spread",e.POSE_WAVE_OUT="wave_out",e.POSE_WAVE_IN="wave_in",e.POSE_FIST="fist",e.POSE_REST="rest",e.VIBRATE_SHORT="short",e.VIBRATE_MEDIUM="medium",e.VIBRATE_LONG="long";var n=e.prototype;n.isReady=function(){return"connected"==this.status&&"arm_recognized"==this.armStatus?!0:!1},n.setStatus=function(t){this.status=t,this.emit("STATUS_CHANGED",this.status)},n.setArmStatus=function(t){this.armStatus=t,this.emit("ARM_STATUS_CHANGED",this.armStatus)},n.setArm=function(t){this.arm=t.arm,this.direction=t.x_direction,this.emit("ARM_CHANGED",this.arm,this.direction)},n.setOrientation=function(t){this.accelerometer=t.accelerometer,this.gyroscope=t.gyroscope,this.orientation=t.orientation},n.setPose=function(t){this.poseEventsEmitTimer&&clearTimeout(this.poseEventsEmitTimer),this.poseEventsEmitTimer=setTimeout(function(){var e=this.pose;this.pose=t.pose,e!=this.pose&&(this.emit("POSE_CHANGED",this.status),this.emit("POSE_RELEASED",e),this.emit("POSE_ADOPTED",this.pose))}.bind(this),i)},n.sendCommand=function(t,e){MyoJS.sendCommand(t,this.id,e)},n.vibrate=function(t,s){"undefined"==typeof t&&(t=e.VIBRATE_SHORT),"undefined"==typeof s&&(s=1);for(var i=0;s>i;i++)this.sendCommand("vibrate",{type:t})},n.requestRSSI=function(){this.sendCommand("request_rssi",{})},t.Myo=e}(window),function(t){"use strict";function e(){this.enabled=!1,this.devices=[],this.plugins={},this.on("BIND_EVENT",o.bind(this))}function s(e){if(this.emit("SOCKET_MESSAGE",e),e.data){var s=JSON.parse(e.data),i=s[1].myo;switch("undefined"==typeof this.devices[i]&&(this.devices[i]=new t.Myo(i),this.emit("NEW_DEVICE",this.devices[i])),s[0]){case"event":switch(this.emit("SOCKET_EVENT",s[1]),s[1].type){case"paired":this.devices[i].setStatus(s[1].type);break;case"connected":this.devices[i].setStatus(s[1].type);break;case"disconnected":this.devices[i].setStatus(s[1].type);break;case"arm_lost":this.devices[i].setArmStatus(s[1].type);break;case"arm_recognized":this.devices[i].setArmStatus(s[1].type),this.devices[i].setArm(s[1]);break;case"orientation":this.devices[i].setOrientation(s[1]);break;case"pose":this.devices[i].setPose(s[1]);break;default:console.warn("UNSUPPORTED EVENT:",s[1].type,s[1])}break;default:console.warn("UNSUPPORTED DATA:",s[0],s[1])}}}function i(){this.enabled=!0,this.emit("SOCKET_OPENED")}function n(){this.enabled=!1,this.emit("SOCKET_CLOSED")}function o(t){switch(t){case"NEW_DEVICE":for(var e in this.devices)this.emit("NEW_DEVICE",this.devices[e])}}var r=10138,h="127.0.0.1",a="ws://"+h+":"+r+"/myo/",c=1;e.prototype=new MyoEventsDispatcher,e.prototype.constructor=e,e.prototype.parent=MyoEventsDispatcher.prototype;var u=e.prototype;u.init=function(){return"WebSocket"in t?(this.socket=new WebSocket(a+c),this.socket.onmessage=s.bind(this),this.socket.onopen=i.bind(this),this.socket.onclose=n.bind(this)):console.error("You need a browser that supports websocket to use your Myo on the web."),this},u.getDevices=function(){return this.devices},u.registerPlugin=function(t,e){return this.plugins[t]={constructor:e,instance:null},this},u.initPlugin=function(t){if("undefined"!=typeof this.plugins[t]){var e=Array.prototype.slice.call(arguments,1);this.plugins[t].instance=new this.plugins[t].constructor(e)}else console.warn('PLUGIN "'+t+"\" DOSEN'T EXIST.");return this},u.sendCommand=function(t,e,s){var i={command:t,myo:e};if("undefined"!=typeof s)for(var n in s)i[n]=s[n];this.socket.send(JSON.stringify(["command",i]))},t.MyoJS=new e}(window);