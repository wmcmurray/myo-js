!function(t){"use strict";function e(){this._eventsListeners={}}var i=e.prototype;i.on=function(t,e){return this._eventsListeners[t]||(this._eventsListeners[t]=[]),this._eventsListeners[t].push(e),"BIND_EVENT"!=t&&this.emit("BIND_EVENT",t),this},i.off=function(t,e){var i,s=[];for(var n in this._eventsListeners[t])i=this._eventsListeners[t][n],i!=e&&s.push(i);return this._eventsListeners[t]=s,this},i.emit=function(t){if(this._eventsListeners[t]){var e=[],i=0;for(i in arguments)i>0&&e.push(arguments[i]);for(i in this._eventsListeners[t])this._eventsListeners[t][i].apply(this,e)}return this},t.MyoEventsDispatcher=e}(window),function(t){"use strict";function e(t){this.id=t,this.connectionStatus=null,this.pairStatus=null,this.armStatus=null,this.arm=null,this.direction=null,this.accelerometer={},this.gyroscope={},this.orientation={},this.pose=null,this.rssi=null,this.on("BIND_EVENT",i.bind(this))}function i(t){switch(t){case"CONNECTION_STATUS_CHANGED":this.emit("CONNECTION_STATUS_CHANGED",this.connectionStatus)}}var s=50;e.prototype=new MyoEventsDispatcher,e.prototype.constructor=e,e.prototype.parent=MyoEventsDispatcher.prototype,e.POSE_THUMB_TO_PINKY="thumb_to_pinky",e.POSE_FINGERS_SPREAD="fingers_spread",e.POSE_WAVE_OUT="wave_out",e.POSE_WAVE_IN="wave_in",e.POSE_FIST="fist",e.POSE_REST="rest",e.VIBRATE_SHORT="short",e.VIBRATE_MEDIUM="medium",e.VIBRATE_LONG="long";var n=e.prototype;n.isReady=function(){return"connected"==this.connectionStatus&&"arm_recognized"==this.armStatus?!0:!1},n.setPairStatus=function(t){this.pairStatus=t,this.emit("PAIR_STATUS_CHANGED",this.pairStatus)},n.setConnectionStatus=function(t){this.connectionStatus=t,this.emit("CONNECTION_STATUS_CHANGED",this.connectionStatus)},n.setArmStatus=function(t){this.armStatus=t,this.emit("ARM_STATUS_CHANGED",this.armStatus)},n.setArm=function(t){this.arm=t.arm,this.direction=t.x_direction,this.emit("ARM_CHANGED",this.arm,this.direction)},n.setOrientation=function(t){this.accelerometer=t.accelerometer,this.gyroscope=t.gyroscope,this.orientation=t.orientation,this.emit("ORIENTATION_CHANGED",this.orientation)},n.setPose=function(t){this.poseEventsEmitTimer&&clearTimeout(this.poseEventsEmitTimer),this.poseEventsEmitTimer=setTimeout(function(){var e=this.pose;this.pose=t.pose,e!=this.pose&&(this.emit("POSE_CHANGED",this.pose),this.emit("POSE_RELEASED",e),this.emit("POSE_ADOPTED",this.pose))}.bind(this),s)},n.setRSSI=function(t){this.rssi=t,this.emit("RSSI_CHANGED",this.rssi)},n.sendCommand=function(t,e){MyoJS.sendCommand(t,this.id,e)},n.vibrate=function(t,i){"undefined"==typeof t&&(t=e.VIBRATE_SHORT),"undefined"==typeof i&&(i=1);for(var s=0;i>s;s++)this.sendCommand("vibrate",{type:t})},n.requestRSSI=function(t){"undefined"==typeof t?this.sendCommand("request_rssi",{}):(this.requestRSSIInterval&&clearInterval(this.requestRSSIInterval),this.requestRSSI(),this.requestRSSIInterval=setInterval(function(){this.requestRSSI()}.bind(this),t))},t.MyoDevice=e}(window),function(t){"use strict";function e(){this.enabled=!1,this.devices=[],this.plugins={},this.on("BIND_EVENT",o.bind(this))}function i(e){if(this.emit("SOCKET_MESSAGE",e),e.data){var i=JSON.parse(e.data),s=i[1].myo;switch("undefined"==typeof this.devices[s]&&(this.devices[s]=new t.MyoDevice(s),this.emit("NEW_DEVICE",this.devices[s])),i[0]){case"event":switch(this.emit("SOCKET_EVENT",i[1]),i[1].type){case"paired":this.devices[s].setPairStatus(i[1].type);break;case"unpaired":this.devices[s].setPairStatus(i[1].type);break;case"connected":this.devices[s].setConnectionStatus(i[1].type);break;case"disconnected":this.devices[s].setConnectionStatus(i[1].type);break;case"arm_lost":this.devices[s].setArmStatus(i[1].type);break;case"arm_recognized":this.devices[s].setArmStatus(i[1].type),this.devices[s].setArm(i[1]);break;case"orientation":this.devices[s].setOrientation(i[1]);break;case"pose":this.devices[s].setPose(i[1]);break;case"rssi":this.devices[s].setRSSI(i[1].rssi);break;default:console.warn("UNSUPPORTED EVENT:",i[1].type,i[1])}break;default:console.warn("UNSUPPORTED DATA:",i[0],i[1])}}}function s(t){this.enabled=!0,this.emit("SOCKET_OPENED",t)}function n(t){this.enabled=!1,this.emit("SOCKET_CLOSED",t)}function o(t){switch(t){case"NEW_DEVICE":for(var e in this.devices)this.emit("NEW_DEVICE",this.devices[e])}}var r=10138,a="127.0.0.1",c="ws://"+a+":"+r+"/myo/",h=1;e.prototype=new MyoEventsDispatcher,e.prototype.constructor=e,e.prototype.parent=MyoEventsDispatcher.prototype;var u=e.prototype;u.init=function(){return"WebSocket"in t?(this.socket=new WebSocket(c+h),this.socket.onmessage=i.bind(this),this.socket.onopen=s.bind(this),this.socket.onclose=n.bind(this),this.initPlugins()):console.error("You need a browser that supports websocket to use your Myo on the web."),this.emit("READY"),this},u.registerPlugin=function(t,e){return this.plugins[t]={constructor:e,instance:null},this},u.getPlugin=function(t){return"undefined"!=typeof this.plugins[t]&&"undefined"!=typeof this.plugins[t].instance?this.plugins[t].instance:null},u.initPlugins=function(){for(var t in this.plugins)this.initPlugin(t)},u.initPlugin=function(t){if("undefined"!=typeof this.plugins[t]){var e=Array.prototype.slice.call(arguments,1);null===this.plugins[t].instance?(this.plugins[t].instance=new this.plugins[t].constructor(e),this.emit("PLUGIN_INIT",t,this.plugins[t].instance)):console.warn('MyoJS : plugin "'+t+'" already initialized.')}else console.warn('MyoJS : plugin "'+t+"\" dosen't exist.");return this},u.getDevices=function(){return this.devices},u.sendCommand=function(t,e,i){var s={command:t,myo:e};if("undefined"!=typeof i)for(var n in i)s[n]=i[n];this.socket.send(JSON.stringify(["command",s]))},t.MyoJS=new e,t.MyoJS.COLOR_BLUE="#00bdde",t.MyoJS.COLOR_DARK="#141d28",t.MyoJS.COLOR_LIGHT="#3d3d3d"}(window);